{
    "is_prj_leader" : {
        "name" : "prj_info",
        "type" : "call",
        "method" : "GET",
        "tokenSign" : "APP",
        "cache" : "#PID#",
        "comment" : "查询帐号在项目中的角色",
        "service" : "iproject",
        "url" : "/role?id=#PID#&account=@{#tokenAcc}",
        "afterAll" : "
            if('@{!role}'!='L') {
                Mesh.error(RetCode.NO_RIGHT, 'not leader');
            } else {
                Mesh.success({});
            }
        "
    },

    "is_grp_leader" : {
        "name" : "check_grp_admin",
        "type" : "dataexists",
        "db" : "hr",
        "expect" : true,
        "errorCode" : 6002,
        "errorInfo" : "no right",
        "sql" : "select * from member where gid=#GID# and uid=@{#tokenCaller} and role='ADM'"
    },
    
    "is_his_leader" : {
        "name" : "check_grp_admin",
        "type" : "dataexists",
        "db" : "hr",
        "expect" : true,
        "errorCode" : 6002,
        "errorInfo" : "no right",
        "sql" : "select * from member
           where gid in(select m.gid from member m,grp g
             where m.uid=#UID# and g.id=m.gid and g.type='D')
              and uid=@{#tokenCaller} and role='ADM'"
    }
}