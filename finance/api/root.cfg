[
{
    "name" : "notifyprj",
    "method" : "PUT",
    "property" : "private",
    "tokenChecker" : "APP-project",
    "comment" : "通知项目信息变更",

    "request": [
        {"name":"pid", "type":"int", "must":true, "min":0, "comment":"项目ID"},
        {"name":"name", "type":"string", "must":true, "min":1, "comment":"项目名称"},
        {"name":"owner", "type":"string", "must":true, "min":1, "comment":"项目投资人帐号"},
        {"name":"leader", "type":"string", "must":true, "min":1, "comment":"项目经理帐号"}
    ],
    
    "process" : [
        {
            "name" : "set_prjinfo",
            "type":"rdb",
            "db":"log",
            "sqls" : [
                "replace into project(id,name,owner,leader)
                values(@{pid},'@{name}','@{owner}','@{leader}')",
                "insert or ignore into prjreport(pid) values(@{pid})" //初始化报表，更新时不必判断是否存在
            ]
        }    
    ]
},
{
    "name" : "businessCost",
    "method" : "PUT",
    "property" : "private",
    "tokenChecker" : "APP-business",
    "comment" : "通知项目信息变更",

    "request": [
        {"name":"pid", "type":"int", "must":true, "min":0, "comment":"项目ID"},
        {"name":"subsidy", "type":"double", "must":true, "min":0, "comment":"补贴"},
        {"name":"expense", "type":"double", "must":true, "min":0, "comment":"报销"}
    ],
    
    "process" : [
        {
            "name" : "set_prj_report",
            "type":"rdb",
            "db":"log",
            "sqls" : [
                "update prjreport set
                    subsidy=subsidy+@{subsidy},
                    expense=expense+@{expense}
                 where pid=@{pid}"
            ]
        }    
    ]
}
]